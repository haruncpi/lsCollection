"use strict";function lsCollection(e){if(!window._)throw"underscore js required";if(!e||""===e)throw"a key name required for data sotre";this.keyName=e}lsCollection.prototype={generateId:function(){return Date.now()},getAll:function(){var e=localStorage.getItem(this.keyName);return(e=JSON.parse(e))||[]},find:function(e){var t=localStorage.getItem(this.keyName),r={_id:e},t=JSON.parse(t);return _.findWhere(t,r)},findWhere:function(e){if("object"!=typeof e)throw"object required, given "+typeof e;var t=localStorage.getItem(this.keyName),t=JSON.parse(t);return _.findWhere(t,e)},where:function(e){if("object"!=typeof e)throw"object required, given "+typeof e;var t=localStorage.getItem(this.keyName),t=JSON.parse(t);return _.where(t,e)},insert:function(e){var t=this.getAll(),r=this.generateId();return e._id=r,t.push(e),localStorage.setItem(this.keyName,JSON.stringify(t)),e},update:function(e,t){var r=this.getAll(),i={_id:e};return!!_.findWhere(r,i)&&(t._id=e,_.extend(_.findWhere(r,i),t),localStorage.setItem(this.keyName,JSON.stringify(r)),t)},delete:function(e){var t=localStorage.getItem(this.keyName),r={_id:e},t=JSON.parse(t);return!!_.findWhere(t,r)&&(t=_.without(t,_.findWhere(t,r)),localStorage.setItem(this.keyName,JSON.stringify(t)),!0)},flash:function(){localStorage.setItem(this.keyName,null),console.log("all data has been flased from "+this.keyName)}};